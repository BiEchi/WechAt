(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Chat_session-chat"],{"213d":function(s,i,t){var e=t("24fb");i=e(!1),i.push([s.i,"uni-text[data-v-54d49bfe]{font-size:20px;color:#2f4f4f}.flex-container[data-v-54d49bfe]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.card[data-v-54d49bfe]{float:left;padding:6px}.profile[data-v-54d49bfe]{-webkit-box-flex:30%;-webkit-flex:30%;flex:30%}.name[data-v-54d49bfe]{-webkit-box-flex:70%;-webkit-flex:70%;flex:70%;padding:.3em;clear:right}.chatting[data-v-54d49bfe]{float:left;padding:10px 0 0 3px}",""]),s.exports=i},5649:function(s,i,t){"use strict";t.r(i);var e=t("b512"),n=t("9ee9");for(var a in n)"default"!==a&&function(s){t.d(i,s,(function(){return n[s]}))}(a);t("e068");var o,r=t("f0c5"),c=Object(r["a"])(n["default"],e["b"],e["c"],!1,null,"54d49bfe",null,!1,e["a"],o);i["default"]=c.exports},"9ee9":function(s,i,t){"use strict";t.r(i);var e=t("ba07"),n=t.n(e);for(var a in e)"default"!==a&&function(s){t.d(i,s,(function(){return e[s]}))}(a);i["default"]=n.a},b512:function(s,i,t){"use strict";var e;t.d(i,"b",(function(){return n})),t.d(i,"c",(function(){return a})),t.d(i,"a",(function(){return e}));var n=function(){var s=this,i=s.$createElement,t=s._self._c||i;return t("v-uni-view",{staticClass:"content"},[t("v-uni-view",{staticClass:"public"},[t("v-uni-text",{staticClass:"public-text"},[s._v("Public Sessions")])],1),s._l(s.pub_sessions,(function(i){return t("v-uni-view",{key:i["Session_id"],on:{click:function(t){arguments[0]=t=s.$handleEvent(t),s.jumpToMessage(i["Session_id"])}}},[t("div",{staticClass:"flex-container"},[t("div",{staticClass:"card"},[t("img",{staticClass:"profile",attrs:{src:"/static/logo.png",alt:"img1"}})]),t("div",{staticClass:"texting"},[t("h4",{staticClass:"name"},[t("b",[s._v(s._s(i["Chat_name"]))])]),t("p",{staticClass:"chatting"},[s._v(s._s(String(i["Msg_Content"]).substring(0,25))),s.display(i["Msg_Content"])?t("v-uni-text",[s._v("...")]):s._e()],1)])])])})),t("v-uni-view",{staticClass:"private"},[t("v-uni-text",{staticClass:"private-text"},[s._v("Private Sessions")])],1),s._l(s.pri_sessions,(function(i){return t("v-uni-view",{key:i["Session_pri_id"],on:{click:function(t){arguments[0]=t=s.$handleEvent(t),s.jumpToMessage(i["Session_id"])}}},[t("div",{staticClass:"flex-container"},[t("div",{staticClass:"card"},[t("img",{staticClass:"profile",attrs:{src:"/static/logo.png",alt:"img1"}})]),t("div",{staticClass:"texting"},[t("h4",{staticClass:"name"},[t("b",[s._v(s._s(i["User_name"]))])])])])])}))],2)},a=[]},ba07:function(s,i,t){"use strict";(function(s){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var t={data:function(){return{pub_sessions:[],pri_sessions:[],pub_msgs_dict:{},pri_msgs_dict:{},my_user_id:1}},onLoad:function(){this.start_getting_session()},methods:{display:function(s){return String(s).length>28},jumpToMessage:function(s){uni.navigateTo({url:"../message/message?session_id="+s})},start_getting_session:function(){var i=this;this.my_user_id=getApp().globalData.user_id,s.callFunction({name:"query",data:{sentence:"SELECT * FROM Joined NATURAL JOIN Chat_session NATURAL JOIN (SELECT Session_id, Msg_Content FROM Contain c NATURAL JOIN Msg m NATURAL JOIN ( SELECT Session_id, MAX(Msg_time) AS MAXT FROM Joined NATURAL JOIN Chat_session NATURAL JOIN Contain NATURAL JOIN Msg WHERE User_id = ? GROUP BY Session_id) AS TEMP WHERE TEMP.Session_id = c.Session_id AND m.Msg_time = TEMP.MAXT ) AS Temp_table2 WHERE User_id = ?",arguments:[this.my_user_id,this.my_user_id]},success:function(s){i.pub_sessions=s.result,console.log("kill me in uniCloud success 1")},fail:function(s){console.log(s)}}),s.callFunction({name:"query",data:{sentence:"(SELECT * FROM Joined_pri JOIN Chat_user ON Joined_pri.User2_id = Chat_user.User_id WHERE User1_id = ?) UNION (SELECT * FROM Joined_pri JOIN Chat_user ON Joined_pri.User1_id = Chat_user.User_id WHERE User2_id = ?)",arguments:[this.my_user_id,this.my_user_id]},success:function(s){i.pri_sessions=s.result,console.log("kill me in uniCloud success 2")},fail:function(s){console.log(s)}})}}};i.default=t}).call(this,t("a9ff")["default"])},e068:function(s,i,t){"use strict";var e=t("fbd8"),n=t.n(e);n.a},fbd8:function(s,i,t){var e=t("213d");"string"===typeof e&&(e=[[s.i,e,""]]),e.locals&&(s.exports=e.locals);var n=t("4f06").default;n("63e81ad0",e,!0,{sourceMap:!1,shadowMode:!1})}}]);