(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Chat_session-chat"],{"213d":function(s,t,e){var i=e("24fb");t=i(!1),t.push([s.i,"uni-text[data-v-54d49bfe]{font-size:20px;color:#2f4f4f}.flex-container[data-v-54d49bfe]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.card[data-v-54d49bfe]{float:left;padding:6px}.profile[data-v-54d49bfe]{-webkit-box-flex:30%;-webkit-flex:30%;flex:30%}.name[data-v-54d49bfe]{-webkit-box-flex:70%;-webkit-flex:70%;flex:70%;padding:.3em;clear:right}.chatting[data-v-54d49bfe]{float:left;padding:10px 0 0 3px}",""]),s.exports=t},5649:function(s,t,e){"use strict";e.r(t);var i=e("b512"),n=e("9ee9");for(var a in n)"default"!==a&&function(s){e.d(t,s,(function(){return n[s]}))}(a);e("e068");var o,r=e("f0c5"),u=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"54d49bfe",null,!1,i["a"],o);t["default"]=u.exports},"9ee9":function(s,t,e){"use strict";e.r(t);var i=e("ba07"),n=e.n(i);for(var a in i)"default"!==a&&function(s){e.d(t,s,(function(){return i[s]}))}(a);t["default"]=n.a},b512:function(s,t,e){"use strict";var i;e.d(t,"b",(function(){return n})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return i}));var n=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticClass:"public"},[e("v-uni-text",{staticClass:"public-text"},[s._v("Public Sessions")])],1),s._l(s.pub_sessions,(function(t){return e("v-uni-view",{key:t["Session_id"],on:{click:function(e){arguments[0]=e=s.$handleEvent(e),s.jumpToMessage(t["Session_id"])}}},[e("div",{staticClass:"flex-container"},[e("div",{staticClass:"card"},[e("img",{staticClass:"profile",attrs:{src:"/static/logo.png",alt:"img1"}})]),e("div",{staticClass:"texting"},[e("h4",{staticClass:"name"},[e("b",[s._v(s._s(t["Chat_name"]))])]),e("p",{staticClass:"chatting"},[s._v(s._s(String(t["Msg_Content"]).substring(0,25))),s.display(t["Msg_Content"])?e("v-uni-text",[s._v("...")]):s._e()],1)])])])})),e("v-uni-view",{staticClass:"private"},[e("v-uni-text",{staticClass:"private-text"},[s._v("Private Sessions")])],1),s._l(s.pri_sessions,(function(t){return e("v-uni-view",{key:t["Session_pri_id"],on:{click:function(e){arguments[0]=e=s.$handleEvent(e),s.jumpToMessage(t["Session_id"])}}},[e("div",{staticClass:"flex-container"},[e("div",{staticClass:"card"},[e("img",{staticClass:"profile",attrs:{src:"/static/logo.png",alt:"img1"}})]),e("div",{staticClass:"texting"},[e("h4",{staticClass:"name"},[e("b",[s._v(s._s(t["User_name"]))])])])])])}))],2)},a=[]},ba07:function(s,t,e){"use strict";(function(s,e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{pub_sessions:[],pri_sessions:[],pub_msgs_dict:{},pri_msgs_dict:{},my_user_id:1}},onLoad:function(){this.start_getting_session()},methods:{display:function(s){return String(s).length>28},jumpToMessage:function(s){uni.navigateTo({url:"../message/message?session_id="+s})},start_getting_session:function(){var t=this;this.my_user_id=getApp().globalData.user_id,s.callFunction({name:"query",data:{sentence:"SELECT * FROM Joined NATURAL JOIN Chat_session NATURAL JOIN (SELECT Session_id, Msg_Content FROM Contain c NATURAL JOIN Msg m NATURAL JOIN ( SELECT Session_id, MAX(Msg_time) AS MAXT FROM Joined NATURAL JOIN Chat_session NATURAL JOIN Contain NATURAL JOIN Msg WHERE User_id = ? GROUP BY Session_id) AS TEMP WHERE TEMP.Session_id = c.Session_id AND m.Msg_time = TEMP.MAXT ) AS Temp_table2 WHERE User_id = ?",arguments:[this.my_user_id,this.my_user_id]},success:function(s){t.pub_sessions=s.result,e("log","kill me in uniCloud success 1"," at pages/Chat_session/chat.vue:100")},fail:function(s){e("log",s," at pages/Chat_session/chat.vue:103")}}),s.callFunction({name:"query",data:{sentence:"(SELECT * FROM Joined_pri JOIN Chat_user ON Joined_pri.User2_id = Chat_user.User_id WHERE User1_id = ?) UNION (SELECT * FROM Joined_pri JOIN Chat_user ON Joined_pri.User1_id = Chat_user.User_id WHERE User2_id = ?)",arguments:[this.my_user_id,this.my_user_id]},success:function(s){t.pri_sessions=s.result,e("log","kill me in uniCloud success 2"," at pages/Chat_session/chat.vue:117")},fail:function(s){e("log",s," at pages/Chat_session/chat.vue:120")}})}}};t.default=i}).call(this,e("a9ff")["default"],e("0de9")["log"])},e068:function(s,t,e){"use strict";var i=e("fbd8"),n=e.n(i);n.a},fbd8:function(s,t,e){var i=e("213d");"string"===typeof i&&(i=[[s.i,i,""]]),i.locals&&(s.exports=i.locals);var n=e("4f06").default;n("63e81ad0",i,!0,{sourceMap:!1,shadowMode:!1})}}]);